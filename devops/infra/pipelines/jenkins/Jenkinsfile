pipeline {
    agent any

    parameters {

    }

    options {

    }

    stages {
        stage('Build') {
            steps {
                sh 'echo "Building webapp with Maven wrapper...'

                sh './mvnw package'

                sh 'echo "Building Docker image with ACR..."'
                acrQuickTask
                    gitPath: '', 
                    gitRefspec: '', 
                    gitRepo: '', 
                    imageNames: [[image: 'amdemoacr.azurecr.io/image:latest']], 
                    registryName: 'amdemoacr', 
                    resourceGroupName: 'amdemo', 
                    tarball: '', 
                    variant: ''
            }
            post {
                sh 'echo "Build successful'
            }
        }
        stage('Test') {
            steps {
                
            }
        }
        stage('Deploy') {
            steps {
                
            }
        }
    }
}